{
  "version": 3,
  "sources": ["artifacts.ts"],
  "sourcesContent": ["import * as s3 from '../../aws-s3';\nimport { Construct } from 'constructs';\nimport { CfnProject } from './codebuild.generated';\nimport { IProject } from './project';\n\n                                                          \nexport interface ArtifactsConfig {\n                                                                 \n  readonly artifactsProperty: CfnProject.ArtifactsProperty;\n}\n\n                                                                                                   \nexport interface IArtifacts {\n                                                                                                \n  readonly identifier?: string;\n\n                                                     \n  readonly type: string;\n\n                                                                                                                                                                                                                       \n  bind(scope: Construct, project: IProject): ArtifactsConfig;\n}\n\n                                                      \nexport interface ArtifactsProps {\n                                                                                                \n  readonly identifier?: string;\n}\n\n                                                        \nexport abstract class Artifacts implements IArtifacts {\n  public static s3(props: S3ArtifactsProps): IArtifacts {\n    return new S3Artifacts(props);\n  }\n\n  public readonly identifier?: string;\n  public abstract readonly type: string;\n\n  protected constructor(props: ArtifactsProps) {\n    this.identifier = props.identifier;\n  }\n\n  public bind(_scope: Construct, _project: IProject): ArtifactsConfig {\n    return {\n      artifactsProperty: {\n        artifactIdentifier: this.identifier,\n        type: this.type,\n      },\n    };\n  }\n}\n\n                                                           \nexport interface S3ArtifactsProps extends ArtifactsProps {\n                                               \n  readonly bucket: s3.IBucket;\n\n                                                                                                                                                                                                                                                                                                            \n  readonly path?: string;\n\n                                                                                                                                                                                                                                                                                                                                                                                                                           \n  readonly name?: string;\n\n                                                                                                                                                                                                     \n  readonly includeBuildId?: boolean;\n\n                                                                                                                                                                                                         \n  readonly packageZip?: boolean;\n\n                                                                                                                                                                                                                        \n  readonly encryption?: boolean;\n}\n\n/**\n * S3 Artifact definition for a CodeBuild Project.\n */\nclass S3Artifacts extends Artifacts {\n  public readonly type = 'S3';\n\n  constructor(private readonly props: S3ArtifactsProps) {\n    super(props);\n  }\n\n  public bind(_scope: Construct, project: IProject): ArtifactsConfig {\n    this.props.bucket.grantReadWrite(project);\n    const superConfig = super.bind(_scope, project);\n    return {\n      artifactsProperty: {\n        ...superConfig.artifactsProperty,\n        location: this.props.bucket.bucketName,\n        path: this.props.path,\n        namespaceType: this.props.includeBuildId === false ? 'NONE' : 'BUILD_ID',\n        name: this.props.name == null ? undefined : this.props.name,\n        packaging: this.props.packageZip === false ? 'NONE' : 'ZIP',\n        encryptionDisabled: this.props.encryption === false ? true : undefined,\n        overrideArtifactName: this.props.name == null ? true : undefined,\n      },\n    };\n  }\n}\n"],
  "mappings": "gNA8BA,eAA+B,CAQ7B,YAAsB,MAAqB,yEACzC,KAAK,WAAa,MAAM,iBARZ,IAAG,MAAuB,kFAC/B,GAAI,aAAY,OAUlB,KAAK,OAAmB,SAAkB,6EACxC,CACL,kBAAmB,CACjB,mBAAoB,KAAK,WACzB,KAAM,KAAK,QAhBnB,QAAA,UAAA,2GA8CA,yBAA0B,UAAS,CAGjC,YAA6B,MAAuB,CAClD,MAAM,OADqB,KAAA,MAAA,MAFb,KAAA,KAAO,KAMhB,KAAK,OAAmB,QAAiB,CAC9C,YAAK,MAAM,OAAO,eAAe,SAE1B,CACL,kBAAmB,IACd,AAHa,MAAM,KAAK,OAAQ,SAGpB,kBACf,SAAU,KAAK,MAAM,OAAO,WAC5B,KAAM,KAAK,MAAM,KACjB,cAAe,KAAK,MAAM,iBAAmB,GAAQ,OAAS,WAC9D,KAAM,KAAK,MAAM,MAAQ,KAAO,OAAY,KAAK,MAAM,KACvD,UAAW,KAAK,MAAM,aAAe,GAAQ,OAAS,MACtD,mBAAoB,KAAK,MAAM,aAAe,GAAQ,GAAO,OAC7D,qBAAsB,KAAK,MAAM,MAAQ,KAAO,GAAO",
  "names": []
}
