{
  "version": 3,
  "sources": ["cache.ts"],
  "sourcesContent": ["import { IBucket } from '../../aws-s3';\nimport { Aws, Fn } from '../../core';\nimport { CfnProject } from './codebuild.generated';\nimport { IProject } from './project';\n\nexport interface BucketCacheOptions {\n                                                                   \n  readonly prefix?: string;\n}\n\n                                                                \nexport enum LocalCacheMode {\n                                                                      \n  SOURCE = 'LOCAL_SOURCE_CACHE',\n\n                                              \n  DOCKER_LAYER = 'LOCAL_DOCKER_LAYER_CACHE',\n\n                                                                     \n  CUSTOM = 'LOCAL_CUSTOM_CACHE',\n}\n\n                                                                                                                                                                                                                                     \nexport abstract class Cache {\n  public static none(): Cache {\n    return {\n      _toCloudFormation(): CfnProject.ProjectCacheProperty | undefined {\n        return { type: 'NO_CACHE' };\n      },\n      _bind(): void {\n      },\n    };\n  }\n\n                                                                                                           \n  public static local(...modes: LocalCacheMode[]): Cache {\n    return {\n      _toCloudFormation: () => ({\n        type: 'LOCAL',\n        modes,\n      }),\n      _bind: () => { return; },\n    };\n  }\n\n                                                                                                                                                                    \n  public static bucket(bucket: IBucket, options?: BucketCacheOptions): Cache {\n    return {\n      _toCloudFormation: () => ({\n        type: 'S3',\n        location: Fn.join('/', [bucket.bucketName, options && options.prefix || Aws.NO_VALUE]),\n      }),\n      _bind: (project) => {\n        bucket.grantReadWrite(project);\n      },\n    };\n  }\n\n  /**\n   * @internal\n   */\n  public abstract _toCloudFormation(): CfnProject.ProjectCacheProperty | undefined;\n\n  /**\n   * @internal\n   */\n  public abstract _bind(project: IProject): void;\n}\n"],
  "mappings": "mOACA,OAAA,QAAA,cAUA,GAAY,gBAAZ,AAAA,UAAY,gBAAc,CAExB,gBAAA,OAAA,qBAGA,gBAAA,aAAA,2BAGA,gBAAA,OAAA,uBARU,eAAA,QAAA,gBAAA,SAAA,eAAc,KAY1B,WAA2B,OACX,OAAI,CAChB,MAAO,CACL,mBAAiB,CACf,MAAO,CAAE,KAAM,aAEjB,OAAK,UAMK,UAAS,MAAuB,gFACrC,CACL,kBAAmB,IAAO,EACxB,KAAM,QACN,QAEF,MAAO,IAAK,UAKF,QAAO,OAAiB,QAA4B,iJACzD,CACL,kBAAmB,IAAO,EACxB,KAAM,KACN,SAAU,OAAA,GAAG,KAAK,IAAK,CAAC,OAAO,WAAY,SAAW,QAAQ,QAAU,OAAA,IAAI,aAE9E,MAAO,AAAC,SAAW,CACjB,OAAO,eAAe,YA9B9B,QAAA,MAAA",
  "names": []
}
